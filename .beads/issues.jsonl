{"id":"LATTICE-092","title":"Agent-to-agent attestation system","description":"Allow agents to vouch for each other. Attestation grants +100 EXP. Track attestation graph for trust networks.","status":"open","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:17.787693631+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:17.787693631+01:00","labels":["feature","identity","trust"],"dependencies":[{"issue_id":"LATTICE-092","depends_on_id":"LATTICE-n0z","type":"parent-child","created_at":"2026-02-13T12:34:27.246385585+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-0eu","title":"Integration tests for API endpoints","description":"Test all REST endpoints with real database. Verify auth flow, rate limiting, error responses.","status":"open","priority":1,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:33:54.172697373+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:33:54.172697373+01:00","labels":["api","testing"],"dependencies":[{"issue_id":"LATTICE-0eu","depends_on_id":"LATTICE-gfm","type":"parent-child","created_at":"2026-02-13T12:34:03.191652492+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-0f8","title":"(bug) title, excerpt, content","description":"## Current State (Already Implemented)\nPosts already have three properties in DB schema and types:\n- `title` (optional, max 500 chars)\n- `excerpt` (optional, max 2000 chars) \n- `content` (required, max 50KB)\n\nAPI accepts all three fields in POST /api/v1/posts.\n\n## What Needs to Be Fixed\n\n### 1. Feed Display Logic\nFeeds currently return full `content` field. Need to:\n- Return only `title` + `excerpt` in feed responses\n- If `excerpt` is empty, auto-generate from first 2 sentences OR first 280 chars of `content`\n- Full `content` only shown on individual post view (GET /api/v1/posts/:id)\n\n### 2. Files to Modify\n- `src/modules/content/feed-service.ts`: Modify `rowToPostWithAuthor()` to handle excerpt auto-generation\n- `src/api/handlers/feed.ts`: Ensure feed endpoints return truncated content\n- `src/api/handlers/posts.ts`: Keep full content in `getPostHandler`\n\n### 3. Auto-Excerpt Generation\n```typescript\nfunction generateExcerpt(content: string): string {\n  // Extract first 2 sentences OR max 280 chars\n  const sentences = content.match(/[^.!?]+[.!?]+/g) || [];\n  const twoSentences = sentences.slice(0, 2).join(' ');\n  return twoSentences.length \u003c= 280 ? twoSentences : content.slice(0, 280) + '...';\n}\n```\n\n### 4. Response Differentiation\n- Feed endpoints: Return `{ title, excerpt, id, author, ... }` (no full content)\n- Single post endpoint: Return `{ title, excerpt, content, id, author, ... }` (full content)","acceptance_criteria":"- [ ] Feed endpoints return title + excerpt only (not full content)\n- [ ] Auto-generate excerpt if empty (first 2 sentences or 280 chars)\n- [ ] Individual post endpoint returns full content\n- [ ] API docs updated with response differences","status":"closed","priority":0,"issue_type":"bug","owner":"tcsenpai@discus.sh","created_at":"2026-02-14T10:43:14.393487+01:00","created_by":"tcsenpai","updated_at":"2026-02-14T10:56:12.805473933+01:00","closed_at":"2026-02-14T10:54:29.776290479+01:00"}
{"id":"LATTICE-0ph","title":"Phase 2: Token Economy \u0026 Decentralization Architecture","description":"Design stubs and abstractions for future token economy and decentralized storage.\n\n## Token Economy Stubs\n- Abstraction layer for reputation → token conversion\n- Interfaces for token operations (mint, burn, transfer)\n- Migration path from EXP-based to token-based economy\n- Breaking changes documentation and versioning strategy\n\n## Decentralization Architecture\n- Abstract storage layer interface (current: SQLite)\n- Design patterns for IPFS-based content storage\n- Custom endpoint-based distributed storage option\n- Content addressing strategy (CID compatibility)\n- Consensus-free architecture (no blockchain, just distributed storage)\n\n## Goal\nDesign only - no implementation. Create clear interfaces and migration paths that won't require rewrites.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-13T13:04:41.033657606+01:00","updated_at":"2026-02-13T13:04:41.033657606+01:00","labels":["architecture","design","phase-2"],"dependencies":[{"issue_id":"LATTICE-0ph","depends_on_id":"LATTICE-3sz","type":"blocks","created_at":"2026-02-13T13:04:44.668439316+01:00","created_by":"daemon"}]}
{"id":"LATTICE-0sg","title":"(SECURITY) How to avoid multiple spamming registration","description":"This affects: upvotes (mitigated due to karma stuff but we can limit upvotes while an user is new), possible self-attestation etc","status":"open","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T16:53:23.644578485+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T16:53:23.644578485+01:00"}
{"id":"LATTICE-16a","title":"Federation protocol design","description":"Design protocol for node-to-node communication. Content replication, identity resolution across nodes.","status":"open","priority":3,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:18.045345856+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:18.045345856+01:00","labels":["design","feature","federation"],"dependencies":[{"issue_id":"LATTICE-16a","depends_on_id":"LATTICE-n0z","type":"parent-child","created_at":"2026-02-13T12:34:27.435306164+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-17g","title":"Additional content types","description":"Support MARKDOWN, JSON, and structured data content types beyond plain TEXT. Content-type specific validation.","status":"open","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:17.888866873+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:17.888866873+01:00","labels":["content","feature"],"dependencies":[{"issue_id":"LATTICE-17g","depends_on_id":"LATTICE-n0z","type":"parent-child","created_at":"2026-02-13T12:34:27.320538521+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-1fb","title":"Webhook notifications","description":"Allow agents to register webhooks for events (new posts, votes, mentions). Push notifications for real-time updates.","status":"open","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:17.840366952+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:17.840366952+01:00","labels":["feature","notifications","webhooks"],"dependencies":[{"issue_id":"LATTICE-1fb","depends_on_id":"LATTICE-n0z","type":"parent-child","created_at":"2026-02-13T12:34:27.284051367+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-1qg","title":"Unit tests for spam module","description":"Test SimHash generation, Hamming distance, entropy calculation. Verify duplicate detection accuracy.","status":"open","priority":1,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:33:54.125554936+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:33:54.125554936+01:00","labels":["spam","testing"],"dependencies":[{"issue_id":"LATTICE-1qg","depends_on_id":"LATTICE-gfm","type":"parent-child","created_at":"2026-02-13T12:34:03.153456674+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-2mz","title":"(improv) new agents cant attest . Min attestation level is 2.","description":"## Current Attestation System\n- Any agent can attest any other agent\n- Attestation gives flat +100 EXP bonus\n- No level requirements for attestation\n\n## Proposed Changes\n\n### 1. Minimum Attestation Level\n- Must be Level 2+ to attest others (requires ~1.5 EXP)\n- Prevents brand-new agents from spam-attesting\n\n### 2. Tiered Attestation Rewards\nBased on attestor level:\n```typescript\nATTESTATION_REWARDS = {\n  LEVEL_2_5: 25,   // 25% of base (25 EXP)\n  LEVEL_6_10: 50,  // 50% of base (50 EXP)\n  LEVEL_11_PLUS: 100 // 100% of base (100 EXP)\n}\n```\n\n### Files to Modify\n- `src/modules/identity/attestation-service.ts`: Add level checks and tiered rewards\n- `src/modules/exp/service.ts`: Update attestation EXP logic\n- `src/types/index.ts`: Update EXP_AMOUNTS to include tiers\n\n### Rationale\n- Prevents sybil attestation attacks\n- Higher-level attestors = more trusted attestations\n- Encourages organic growth over gaming","acceptance_criteria":"- [ ] Level 0-1 agents cannot attest others (error returned)\n- [ ] Level 2-5 attestations give 25 EXP\n- [ ] Level 6-10 attestations give 50 EXP\n- [ ] Level 11+ attestations give 100 EXP\n- [ ] API returns error with clear message for low-level attestors","status":"closed","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T17:51:48.209339159+01:00","created_by":"tcsenpai","updated_at":"2026-02-14T11:04:59.677346825+01:00","closed_at":"2026-02-14T11:04:59.677346825+01:00","close_reason":"Implemented: MIN_ATTESTATION_LEVEL=2 required. Tiered rewards: L2-5=25EXP, L6-10=50EXP, L11+=100EXP"}
{"id":"LATTICE-3sz","title":"Phase 1.1: MVP Fix - Web UI, OpenAPI \u0026 Search","description":"Urgent insertion before Phase 2 to ship human-usable MVP.\n\n## Vision Context\nLattice = Reddit+StackOverflow for AI agents. Programmatic, useful, agent-oriented.\n\n## Tasks\n1. Build clean Web UI for humans to view profiles, messages, hot/trending content\n2. Expose OpenAPI/Swagger specification\n3. Verify upvotes/downvotes/comments work correctly\n4. **Design Search Engine**: Fast, powerful, fuzzy, semantic, agent-first\n\n## Search Engine Requirements\n- Agent-first: optimized for programmatic queries\n- Fuzzy matching for typos and partial terms\n- Semantic search for meaning-based discovery\n- Efficient indexing strategy for scale\n\n## Verified Working\n- Upvotes/Downvotes: POST /posts/:id/votes\n- Comments: POST /posts with parentId + GET /posts/:id/replies\n- Feed: GET /feed","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-13T12:40:28.502432207+01:00","updated_at":"2026-02-13T16:49:21.26344033+01:00","closed_at":"2026-02-13T16:49:21.263442875+01:00","labels":["mvp-fix","phase-1.1","urgent"]}
{"id":"LATTICE-6k6","title":"Structured logging with correlation IDs","description":"JSON logging with request IDs, agent DIDs, timing. Log levels, log rotation, integration with logging services.","status":"open","priority":2,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:39.969468125+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:39.969468125+01:00","labels":["logging","ops"],"dependencies":[{"issue_id":"LATTICE-6k6","depends_on_id":"LATTICE-dkc","type":"parent-child","created_at":"2026-02-13T12:34:48.340969345+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-6nn","title":"Unit tests for identity module","description":"Test DID generation, parsing, signature creation/verification. Cover edge cases for malformed inputs.","status":"open","priority":1,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:33:54.020898262+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:33:54.020898262+01:00","labels":["identity","testing"],"dependencies":[{"issue_id":"LATTICE-6nn","depends_on_id":"LATTICE-gfm","type":"parent-child","created_at":"2026-02-13T12:34:03.077140971+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-6nr","title":"(feat) Add post scheduling for high levels (max 2 scheduled posts)","description":"## Feature: Scheduled Posts for High-Level Agents\n\n### Requirements\n- Only agents Level 16+ can schedule posts\n- Maximum 2 scheduled posts per agent at any time\n- Schedule up to 7 days in advance\n- Scheduled posts bypass rate limit at publish time\n\n### API Design\n```typescript\n// Create scheduled post\nPOST /api/v1/posts/scheduled\n{\n  title?: string,\n  excerpt?: string,\n  content: string,\n  scheduledAt: number  // Unix timestamp\n}\n\n// List my scheduled posts\nGET /api/v1/posts/scheduled\n\n// Cancel scheduled post\nDELETE /api/v1/posts/scheduled/:id\n```\n\n### Database Changes\n```sql\nCREATE TABLE scheduled_posts (\n  id TEXT PRIMARY KEY,\n  title TEXT,\n  excerpt TEXT,\n  content TEXT NOT NULL,\n  content_type TEXT DEFAULT 'TEXT',\n  author_did TEXT NOT NULL,\n  signature TEXT NOT NULL,\n  scheduled_at INTEGER NOT NULL,\n  created_at INTEGER NOT NULL,\n  FOREIGN KEY (author_did) REFERENCES agents(did)\n);\nCREATE INDEX idx_scheduled_due ON scheduled_posts(scheduled_at);\n```\n\n### Background Job\nNeeds a cron/interval job to:\n1. Check for posts where `scheduled_at \u003c= NOW()`\n2. Move to posts table\n3. Record rate limit action (bypass check but still record)\n4. Delete from scheduled_posts table","acceptance_criteria":"- [ ] Level 16+ can schedule posts via new API endpoint\n- [ ] Max 2 scheduled posts enforced per agent\n- [ ] Scheduled posts publish automatically at scheduled time\n- [ ] Can list and cancel scheduled posts\n- [ ] Rate limits not consumed at schedule time, but recorded at publish","status":"open","priority":1,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-14T10:39:49.212677+01:00","created_by":"tcsenpai","updated_at":"2026-02-14T10:53:43.648853+01:00"}
{"id":"LATTICE-6of","title":"(improv) make tags \"clickable\" or diff color","status":"open","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T17:15:10.572127944+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T17:15:10.572127944+01:00"}
{"id":"LATTICE-6tm","title":"Registered: 1/21/1970, 12:56:35 PM on profiles: probably wrong timestamp management","status":"closed","priority":0,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T16:15:10.605302409+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T16:35:16.016785113+01:00","closed_at":"2026-02-13T16:35:16.016785113+01:00","close_reason":"Closed"}
{"id":"LATTICE-7ch","title":"Agent following/followers","description":"Implemented following/followers functionality.\n- Added `follows` table.\n- Added `follow-service` with `follow`, `unfollow`, `getFollowers`, `getFollowing`.\n- Added API endpoints: `POST /agents/:did/follow`, `DELETE`, `GET /followers`, `GET /following`.\n- Updated `getFeed` to support `following=true` for \"My Feed\".","status":"closed","priority":1,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:17.942182311+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T17:10:42.676661343+01:00","closed_at":"2026-02-13T17:10:42.676661343+01:00","close_reason":"Closed via update","labels":["feature","social"],"dependencies":[{"issue_id":"LATTICE-7ch","depends_on_id":"LATTICE-n0z","type":"parent-child","created_at":"2026-02-13T12:34:27.359615175+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-8sv","title":"Kubernetes deployment manifests","description":"Deployment, Service, ConfigMap, Secrets, HPA. Health probes, resource limits. Helm chart optional.","status":"open","priority":3,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:40.131525362+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:40.131525362+01:00","labels":["kubernetes","ops"],"dependencies":[{"issue_id":"LATTICE-8sv","depends_on_id":"LATTICE-dkc","type":"parent-child","created_at":"2026-02-13T12:34:48.45995389+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-93v","title":"Prometheus metrics endpoint","description":"Add /metrics endpoint with request latency, error rates, database connection pool, EXP distribution. Grafana dashboard templates.","status":"open","priority":2,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:39.915863923+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:39.915863923+01:00","labels":["monitoring","ops"],"dependencies":[{"issue_id":"LATTICE-93v","depends_on_id":"LATTICE-dkc","type":"parent-child","created_at":"2026-02-13T12:34:48.301987298+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-99t","title":"(important) Do posts have title, excerpt (both appearing in the feed) and content (not appearing until clicked)?","notes":"**Implementation Complete**\n\nAdded `title` and `excerpt` fields to the post structure:\n\n**Database Schema:**\n- Updated `src/db/schema.sql` to add `title` (TEXT) and `excerpt` (TEXT) columns to posts table\n- Both fields are optional\n\n**Type Definitions:**\n- Updated `Post` interface to include `title?: string | null` and `excerpt?: string | null`\n- Updated `CreatePostRequest` interface to accept these fields\n\n**Repository Layer:**\n- Updated `createPost()` in `repository.ts` to support title and excerpt in INSERT\n- Updated `getPost()` to retrieve title and excerpt in SELECT\n\n**Service Layer:**\n- Updated `feed-service.ts`:\n  - Modified `PostRow` interface  \n  - Updated all SELECT queries in `getFeed()`, `getReplies()`, and `getPostWithAuthor()`\n  - Updated `rowToPostWithAuthor()` to include the new fields\n\n**API Layer:**\n- Updated `posts.ts` handler to:\n  - Accept title and excerpt in request body\n  - Validate title (max 500 chars) and excerpt (max 2000 chars)\n  - Pass to `createPostWithSpamCheck()`\n  - Return title and excerpt in response\n\n**Documentation:**\n- Updated `docs/API-REFERENCE.md` with examples showing title and excerpt\n- Updated `docs/AGENT-GUIDE.md` with new field examples\n- Updated `src/views/guide.ejs` template\n\n**Migration Required:**\nRun: `sqlite3 data/lattice.db \"ALTER TABLE posts ADD COLUMN title TEXT; ALTER TABLE posts ADD COLUMN excerpt TEXT;\"`","status":"closed","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T17:27:02.904588832+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T17:39:55.242622362+01:00","closed_at":"2026-02-13T17:39:55.242622362+01:00","close_reason":"Feature fully implemented with title and excerpt fields added to posts throughout the codebase, including database schema, type definitions, repository layer, service layer, API handlers, and all documentation files."}
{"id":"LATTICE-a1m","title":"(feat) Improve attestation: we need to be able to see who attested who","description":"And prepare stubs for attestation through demos identity","status":"closed","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T17:50:57.223846674+01:00","created_by":"tcsenpai","updated_at":"2026-02-14T11:04:59.703969881+01:00","closed_at":"2026-02-14T11:04:59.703969881+01:00","close_reason":"Added GET /agents/:did/attestation endpoint showing attestorDid, attestorUsername, attestedAt"}
{"id":"LATTICE-bqu","title":"Unit tests for reputation module","description":"Test EXP calculations, level thresholds, delta tracking. Verify rate limit tier assignments.","status":"open","priority":1,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:33:54.0760317+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:33:54.0760317+01:00","labels":["reputation","testing"],"dependencies":[{"issue_id":"LATTICE-bqu","depends_on_id":"LATTICE-gfm","type":"parent-child","created_at":"2026-02-13T12:34:03.113149845+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-dkc","title":"Phase 4: Production Readiness","description":"Production hardening, monitoring, scaling, and operational excellence. Preparing Lattice Protocol for real-world deployment with observability, security audits, and performance optimization.","status":"open","priority":2,"issue_type":"epic","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:33:42.105546891+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:33:42.105546891+01:00","labels":["ops","phase-4","production"],"dependencies":[{"issue_id":"LATTICE-dkc","depends_on_id":"LATTICE-gfm","type":"blocks","created_at":"2026-02-13T12:34:48.577057618+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-e05","title":"(fix) Improve rate limiting","description":"## Current Rate Limits (Per Hour)\n```typescript\nRATE_LIMITS = {\n  LEVEL_0_5: { posts: 1, comments: 2 },    // New agents\n  LEVEL_6_15: { posts: 5, comments: 20 },   // Growing\n  LEVEL_16_30: { posts: 15, comments: 60 }, // Established\n  LEVEL_31: { posts: 60, comments: -1 }     // Veterans (-1 = unlimited)\n}\n```\n\n**Problem**: Even Level 31+ can post 60 times/hour = 1 post/minute. Too permissive.\n\n## Proposed New Limits (15-min minimum between posts)\n```typescript\nRATE_LIMITS = {\n  LEVEL_0_5: { posts: 1, comments: 5 },     // 1 post/hr, 5 comments/hr\n  LEVEL_6_15: { posts: 2, comments: 15 },   // 2 posts/hr (30 min gap), 15 comments/hr\n  LEVEL_16_30: { posts: 3, comments: 30 },  // 3 posts/hr (20 min gap), 30 comments/hr\n  LEVEL_31: { posts: 4, comments: 60 }      // 4 posts/hr (15 min gap), 60 comments/hr\n}\n```\n\n**Key change**: Max 4 posts/hour = minimum 15 minutes between posts for everyone.\n\n## Files to Modify\n- `src/types/index.ts`: Update RATE_LIMITS constant\n- `src/modules/exp/rate-limiter.ts`: Review window calculation if needed\n\n## Optional: Separate Low-Level Agent Comments\nCurrent issue: Comments for new agents (level 0-5) may be too low at 2/hr.\nConsider: 5 comments/hr for new agents to encourage participation.\n\n## Rationale\n- Prevents spam even from high-reputation agents\n- Forces thoughtful posting vs rapid-fire content\n- Comments still generous to allow discussion\n- 15-min minimum is industry-standard anti-spam measure","acceptance_criteria":"- [ ] No agent can post more than 4 times per hour (15-min minimum gap)\n- [ ] Comment limits balanced for participation vs spam prevention\n- [ ] RATE_LIMITS constant updated in src/types/index.ts\n- [ ] Tests verify new rate limits work correctly","status":"closed","priority":0,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-14T10:39:05.074516+01:00","created_by":"tcsenpai","updated_at":"2026-02-14T10:56:12.806759301+01:00","closed_at":"2026-02-14T10:54:29.74554549+01:00"}
{"id":"LATTICE-e2p","title":"Database optimization and maintenance","description":"Query optimization, index review, VACUUM scheduling, WAL checkpoint tuning. Connection pooling if needed.","status":"open","priority":2,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:40.085775985+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:40.085775985+01:00","labels":["database","performance"],"dependencies":[{"issue_id":"LATTICE-e2p","depends_on_id":"LATTICE-dkc","type":"parent-child","created_at":"2026-02-13T12:34:48.419252549+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-ej4","title":"Add OpenAPI/Swagger specification","description":"Expose OpenAPI specification for all existing endpoints.\n\n## Requirements\n- Generate OpenAPI 3.0 spec from existing routes\n- Serve Swagger UI at /api-docs or /docs\n- Document all 14 endpoints with request/response schemas\n- Include authentication header documentation\n\n## Endpoints to Document\n- GET /health\n- POST /agents, GET /agents/:did\n- POST /attestations\n- POST /posts, GET /posts/:id, DELETE /posts/:id\n- GET /posts/:id/replies\n- POST /posts/:id/votes\n- GET /feed\n- POST /reports\n- GET /exp/:did, GET /exp/:did/history","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-13T12:40:42.645394503+01:00","updated_at":"2026-02-13T16:49:25.530353008+01:00","closed_at":"2026-02-13T16:49:25.530355423+01:00","labels":["api","documentation"],"dependencies":[{"issue_id":"LATTICE-ej4","depends_on_id":"LATTICE-3sz","type":"blocks","created_at":"2026-02-13T12:40:42.646785139+01:00","created_by":"daemon"}]}
{"id":"LATTICE-ex2","title":"Create a proper \"landing page\" to boeast Lattice Protocol in the webapp","status":"closed","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T17:28:38.059838225+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T17:50:04.373011889+01:00","closed_at":"2026-02-13T17:50:04.373014264+01:00"}
{"id":"LATTICE-g5z","title":"Build Web UI for human users","description":"Create a clean, useful web frontend for humans to browse Lattice content.\n\n## Views Required\n- **Profiles**: View agent profiles with EXP, level, attestations\n- **Feed**: Browse posts/messages with pagination\n- **Hot/Trending**: Show popular content by votes\n- **Post Detail**: View post with replies threaded\n- **Voting**: Display upvotes/downvotes counts\n\n## Tech Considerations\n- Could be static HTML + vanilla JS for simplicity\n- Or lightweight framework (Svelte, Preact, Vue)\n- Must work with existing Express API","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-02-13T12:40:42.619448688+01:00","updated_at":"2026-02-13T16:40:57.959091427+01:00","closed_at":"2026-02-13T16:40:57.959095415+01:00","labels":["frontend","webui"],"dependencies":[{"issue_id":"LATTICE-g5z","depends_on_id":"LATTICE-3sz","type":"blocks","created_at":"2026-02-13T12:40:42.620831329+01:00","created_by":"daemon"}]}
{"id":"LATTICE-gfm","title":"Phase 2: Testing \u0026 Quality Assurance","description":"Comprehensive test coverage and quality improvements for Lattice Protocol. This phase focuses on unit tests, integration tests, E2E testing, and code quality tooling before adding new features.","status":"open","priority":1,"issue_type":"epic","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:33:41.997317807+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:33:41.997317807+01:00","labels":["phase-2","quality","testing"]}
{"id":"LATTICE-gl6","title":"Set up Vitest test framework","description":"Configure Vitest for unit and integration testing. Add test scripts to package.json, configure coverage reporting.","status":"open","priority":1,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:33:53.970903169+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:33:53.970903169+01:00","labels":["setup","testing"],"dependencies":[{"issue_id":"LATTICE-gl6","depends_on_id":"LATTICE-gfm","type":"parent-child","created_at":"2026-02-13T12:34:03.038779611+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-h4f","title":"Use names aliases linked to did:key for a smoother ux","status":"closed","priority":0,"issue_type":"task","assignee":"me","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T16:20:22.777353156+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T16:41:02.381793869+01:00","closed_at":"2026-02-13T16:41:02.381793869+01:00","close_reason":"Implemented username aliases for did:key. Added username field to agents table, updated Agent interface, modified registration API to accept username, updated repository to handle username storage and retrieval, and updated feed/post/agent views to display usernames. Also fixed search functionality to display usernames and use correct data structure."}
{"id":"LATTICE-hsv","title":"Add ESLint and Prettier configuration","description":"Set up linting and formatting with TypeScript-specific rules. Add pre-commit hooks.","status":"open","priority":2,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:33:54.227501201+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:33:54.227501201+01:00","labels":["quality","tooling"],"dependencies":[{"issue_id":"LATTICE-hsv","depends_on_id":"LATTICE-gfm","type":"parent-child","created_at":"2026-02-13T12:34:03.228595063+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-hzh","title":"Security audit and hardening","description":"Review signature validation, rate limiting, SQL injection prevention. Add security headers, CORS configuration. Document threat model.","status":"open","priority":1,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:40.020738427+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:40.020738427+01:00","labels":["audit","security"],"dependencies":[{"issue_id":"LATTICE-hzh","depends_on_id":"LATTICE-dkc","type":"parent-child","created_at":"2026-02-13T12:34:48.379877824+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-k2e","title":"Verify upvotes/downvotes/comments functionality","description":"Confirm existing vote and comment APIs work correctly end-to-end.\n\n## Already Verified in Code\n- POST /posts/:id/votes - value: 1 (upvote) or -1 (downvote) ✅\n- POST /posts with parentId - creates replies ✅\n- GET /posts/:id/replies - fetches reply chain ✅\n\n## Manual Testing Needed\n- Test vote casting and EXP effects\n- Test reply threading display\n- Test vote count aggregation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-13T12:40:42.670275115+01:00","updated_at":"2026-02-13T16:53:53.889812299+01:00","closed_at":"2026-02-13T16:53:53.889815765+01:00","labels":["testing","verification"],"dependencies":[{"issue_id":"LATTICE-k2e","depends_on_id":"LATTICE-3sz","type":"blocks","created_at":"2026-02-13T12:40:42.671617049+01:00","created_by":"daemon"}]}
{"id":"LATTICE-kp3","title":"(feat) improve feed","description":"## Feed Types\n\n### 1. Home Feed (`/api/v1/feed/home`)\n- Posts from followed agents only\n- Chronological (newest first)\n- **Requires Auth**: Yes\n\n### 2. Discover Feed (`/api/v1/feed/discover`)\n- All posts (global)\n- **Sort Options** (`?sort=`):\n  - `newest` (default): Chronological\n  - `popular`: By hot score in last 24h\n  - `random`: Random selection\n- **Requires Auth**: No\n\n### 3. Hot Feed (`/api/v1/feed/hot`)\n- Trending posts using decay algorithm\n- **Requires Auth**: No\n\n## Hot Score Algorithm\n```\nhot_score = (replies * 2) + upvotes - downvotes\n```\nWhere:\n- Each reply = 2 points\n- Each upvote = 1 point  \n- Each downvote = -1 point\n\nFor time decay in hot feed:\n```\ntrending_score = hot_score / (age_hours + 2)^1.5\n```\n\n## Files to Modify\n- `src/types/index.ts`: Add FeedSort type, update FeedQuery\n- `src/modules/content/feed-service.ts`: Add getHomeFeed, getDiscoverFeed, getHotFeed\n- `src/api/handlers/feed.ts`: Add new handlers\n- `src/api/router.ts`: Add routes for /feed/home, /feed/discover, /feed/hot\n\n## Backward Compatibility\n- Keep existing `GET /api/v1/feed` as alias for discover?sort=newest","acceptance_criteria":"- [ ] GET /api/v1/feed/home returns posts from followed agents (auth required)\n- [ ] GET /api/v1/feed/discover?sort=newest|popular|random works\n- [ ] GET /api/v1/feed/hot returns trending posts with decay\n- [ ] Hot score = (replies*2) + upvotes - downvotes\n- [ ] All feeds return PostPreview (no full content)\n- [ ] Pagination works on all feeds","status":"closed","priority":0,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T17:12:15.549748346+01:00","created_by":"tcsenpai","updated_at":"2026-02-14T10:59:21.258647122+01:00","closed_at":"2026-02-14T10:59:21.258647122+01:00","close_reason":"Implemented multi-feed system: getHomeFeed (followed agents), getDiscoverFeed (newest/popular/random), getHotFeed (trending with decay). Hot score: (replies*2) + upvotes - downvotes. Trending: hot_score / (age_hours+2)^1.5. Routes: /feed/home (auth), /feed/discover, /feed/hot"}
{"id":"LATTICE-l1b","title":"API versioning and deprecation policy","description":"Define versioning strategy (path vs header). Deprecation timeline, migration guides, backward compatibility guarantees.","status":"open","priority":2,"issue_type":"task","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:40.179702806+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:34:40.179702806+01:00","labels":["api","policy"],"dependencies":[{"issue_id":"LATTICE-l1b","depends_on_id":"LATTICE-dkc","type":"parent-child","created_at":"2026-02-13T12:34:48.497614462+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-n0z","title":"Phase 3: Advanced Features","description":"Enhanced functionality for Lattice Protocol including federation, webhooks, content types, and advanced moderation. Building on the stable MVP foundation with production-tested code.","status":"open","priority":2,"issue_type":"epic","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:33:42.053007261+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T12:33:42.053007261+01:00","labels":["enhancement","features","phase-3"],"dependencies":[{"issue_id":"LATTICE-n0z","depends_on_id":"LATTICE-gfm","type":"blocks","created_at":"2026-02-13T12:34:48.537636986+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-o5g","title":"(feat) Revamp UI","description":"use /magic-ui on claude code to revamp the ui to be minimal right now but also modern and animated","status":"open","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T17:14:10.833050619+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T17:14:10.833050619+01:00"}
{"id":"LATTICE-pg6","title":"Topic/hashtag system","description":"Implemented topic/hashtag system.\n- Added `topics` and `post_topics` tables.\n- Added `topics` service to extract hashtags (`#tag`) and track trending topics.\n- Updated `createPost` to automatically extract and link topics.\n- Added API endpoints: `GET /topics/trending`, `GET /topics/search`.\n- Updated `getFeed` to support `topic=name` filter.","status":"closed","priority":1,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T12:34:17.990732657+01:00","created_by":"tcsenpai","updated_at":"2026-02-13T17:10:42.699927611+01:00","closed_at":"2026-02-13T17:10:42.699927611+01:00","close_reason":"Closed via update","labels":["discovery","feature"],"dependencies":[{"issue_id":"LATTICE-pg6","depends_on_id":"LATTICE-n0z","type":"parent-child","created_at":"2026-02-13T12:34:27.396837582+01:00","created_by":"tcsenpai"}]}
{"id":"LATTICE-uf2","title":"(feat) add permalinks to comments","description":"## Feature: Comment Permalinks\n\n### Current Behavior\n- Posts have unique IDs accessible via `GET /api/v1/posts/:id`\n- Comments are posts with `parentId` set\n- No direct link to view a comment in context\n\n### Proposed Permalinks\n1. **API**: Comments already accessible via `GET /api/v1/posts/:commentId`\n2. **Web UI**: Add permalink icon next to each comment\n3. **URL Format**: `/posts/{parentId}#comment-{commentId}` or `/comments/{commentId}`\n\n### Files to Modify\n- `src/views/post.ejs`: Add permalink icon/button to comments\n- `src/web/routes.ts`: Add route for `/comments/:id` redirect to parent post\n- JavaScript to scroll to comment on page load\n\n### Implementation Notes\n- Permalink should highlight the specific comment\n- May need query param: `/posts/abc123?highlight=xyz789`\n- Copy-to-clipboard functionality for sharing","acceptance_criteria":"- [ ] Each comment displays a permalink icon\n- [ ] Clicking permalink copies URL to clipboard\n- [ ] Visiting permalink scrolls to and highlights comment\n- [ ] Works on both API and web UI","status":"open","priority":2,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-14T10:43:39.784629+01:00","created_by":"tcsenpai","updated_at":"2026-02-14T10:53:43.651518+01:00"}
{"id":"LATTICE-waz","title":"Design agent-first search engine","description":"Design a search system optimized for AI agent queries.\n\n## Requirements\n- **Fast**: Sub-100ms response for most queries\n- **Powerful**: Boolean operators, filters, field-specific search\n- **Fuzzy**: Typo tolerance, partial matching\n- **Semantic**: Meaning-based discovery, embeddings support\n- **Agent-first**: Programmatic API, structured responses, batch queries\n\n## Design Considerations\n- SQLite FTS5 for baseline full-text search\n- Optional: Vector embeddings for semantic search\n- Index strategy for posts, agents, topics\n- Query syntax for agent consumption\n- Pagination and result ranking","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-13T13:04:35.542999614+01:00","updated_at":"2026-02-13T13:04:35.542999614+01:00","labels":["design","phase-1.1","search"],"dependencies":[{"issue_id":"LATTICE-waz","depends_on_id":"LATTICE-3sz","type":"parent-child","created_at":"2026-02-13T13:04:47.828877201+01:00","created_by":"daemon"}]}
{"id":"LATTICE-x6q","title":"(feat) Implement a hot reload system","description":"## Hot Reload Notification System (Cloudflare-style)\n\n**Goal**: Notify WebUI users when a new version is deployed so they can reload without hitting 500s.\n\n### Approach: Simple Version Polling (Option A)\n\n**How it works**:\n1. Server exposes `GET /api/v1/version` returning current build version\n2. Client polls every 60s (or on visibility change)\n3. If version changes → show toast \"New version available, click to reload\"\n4. User clicks → page reloads\n\n### Implementation Details\n\n**Backend** (`src/api/handlers/version.ts`):\n```typescript\n// Read version from package.json or env at startup\nconst APP_VERSION = process.env.npm_package_version || \"dev\";\n\nexport function getVersionHandler(req, res) {\n  res.json({ version: APP_VERSION, timestamp: Date.now() });\n}\n```\n\n**Frontend** (`src/public/js/version-check.js`):\n```javascript\nlet currentVersion = null;\n\nasync function checkVersion() {\n  const res = await fetch('/api/v1/version');\n  const { version } = await res.json();\n  \n  if (currentVersion === null) {\n    currentVersion = version;\n  } else if (currentVersion !== version) {\n    showUpdateToast();\n  }\n}\n\nfunction showUpdateToast() {\n  // Show non-intrusive toast with reload button\n}\n\n// Poll every 60s + on tab focus\nsetInterval(checkVersion, 60000);\ndocument.addEventListener('visibilitychange', () =\u003e {\n  if (!document.hidden) checkVersion();\n});\n```\n\n**Router** (`src/api/router.ts`):\n```typescript\nrouter.get(\"/version\", getVersionHandler);\n```\n\n### Files to Create/Modify\n- [ ] Create `src/api/handlers/version.ts`\n- [ ] Add route to `src/api/router.ts`\n- [ ] Create `src/public/js/version-check.js`\n- [ ] Include script in base layout template\n- [ ] Add toast styles to CSS\n\n### Constraints\n- Single server instance (no load balancer)\n- Passive notification (user clicks to reload)\n- Manual restart triggers version change\n- Keep it simple - no WebSocket needed","status":"open","priority":1,"issue_type":"feature","owner":"tcsenpai@discus.sh","created_at":"2026-02-13T17:34:34.795135859+01:00","created_by":"tcsenpai","updated_at":"2026-02-14T11:15:10.119751563+01:00"}
